{#
    This file is part of the CloudStack Client Generator.

    (c) Quentin Pleplé <quentin.pleple@gmail.com>
    (c) Aaron Hurt <ahurt@anbcs.com>
    (c) Nathan Johnson <nathan@nathanjohnson.info>
    (c) Daniel Carbone <daniel.p.carbone@gmail.com>
    (c) Bogdan Gabor <bgabor@ena.com>

    For the full copyright and license information, please view the LICENSE
    file that was distributed with this source code.
#}
{% autoescape false %}
<?php namespace {% if config.namespace != '' %}{{ config.namespace }}\{% endif %}Response;

/*
 * This file was autogenerated as part of the CloudStack PHP Client.
 *
 * Date Generated: {{ config.now.format('Y-m-d') }}
 * API Version: {{ capabilities.capability.cloudstackversion }}
 *
 * (c) Quentin Pleplé {{ '<quentin.pleple@gmail.com>'|raw }}
 * (c) Aaron Hurt {{ '<ahurt@anbcs.com>'|raw }}
 * (c) Nathan Johnson {{ '<nathan@nathanjohnson.org>'|raw }}
 * (c) Daniel Carbone {{ '<daniel.p.carbone@gmail.com>'|raw }}
 * (c) Bogdan Gabor {{ '<bgabor@ena.com>'|raw }}
 *
 * For the full copyright and license information, please view the LICENSE
 * file that was distributed with this source code.
 */

/**
 * @SWG\Definition(definition="{{ responseClassName }}")
 */
class {{ responseClassName }} extends AbstractResponse {
    {% for prop in response %}
    {% set type = prop.type %}
    {% set class = prop.class %}

    /**
     *  @SWG\Property(
{% if type == "int" %}
     *    type="integer", format="int64",
{% elseif type == "date" %}
     *    type="string", format="date-time",
{% set type='string' %}
{% elseif type == "boolean" %}
     *    type="boolean",
{% set type='bool' %}
{% elseif type == "array" %}
     *    type="array",
{% if class == "string" %}
     *    @SWG\Items(type="string"),
{% else %}
     *    @SWG\Items(ref="#/definitions/{{ class }}"),
{% endif %}
{% else %}
     *    type="{{ type }}",
{% endif %}
     *    description="{{ prop.description }}"
     *  )
     *  @var {% if (type != 'array' or class == 'string') %}{{ type }}{% else %}{{ (class ~ '[]')|capitalize }}{% endif %} {{ prop.name }} {{ prop.description }}
     */
    public ${{ prop.name }};
{% endfor %}

{% set nestedObjProps = [] %}
{% for prop in response %}
    {% if prop.type == 'array' and prop.class != 'string' %}
        {% set nestedObjProps = nestedObjProps|merge([prop.name]) %}
    {% endif  %}
{% endfor %}

{% if nestedObjProps != [] %}

    public function __construct(array $data = [])
    {
        foreach ($data as $key => $value) {
            if (in_array($key, ['{{ nestedObjProps|join("','") }}'])) {
                $this->$key = [];
                $className = '{% if config.namespace != '' %}\\{{ config.namespace|replace({'\\': '\\\\'}) }}\\{% endif %}Response\\' . ucfirst($key);
                foreach ($value as $objData) {
                    $this->{$key}[] = new $className($objData);
                }
            } else {
                $this->$key = $value;
            }
        }
    }

{% endif %}

}
{% endautoescape %}
